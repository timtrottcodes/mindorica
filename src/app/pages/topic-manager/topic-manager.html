<div class="container mt-4">
  <h2>Topics</h2>

  <div class="mb-4">
    <p>
      Topics help you organize your flashcards by subjects or categories. You can create
      broad topics like <em>“Bulgarian Language”</em> and add subtopics such as
      <em>“Alphabet”</em> or <em>“Food”</em> to keep your learning structured.
    </p>
    <p>
      To add a new topic, enter a name in the box below (use slashes <code>/</code> for
      subtopics, e.g. <code>Bulgarian/Food</code>) and click <strong>Add Topic</strong>.
    </p>
    <p>
      Once topics are created, click the topic link where you can then add, edit, or delete flashcards.
      This helps keep your study materials organized and easy to navigate.
    </p>
  </div>

  <div *ngIf="topics.length === 0" class="alert alert-info mt-3">
    No topics created yet. Get started by creating a new topic or import some!
  </div>

  <div class="mx-auto" style="max-width: 650px">
    <form (submit)="addTopic(); $event.preventDefault()" class="mb-3" style="max-width: 600px;">
      
      <div class="d-flex justify-content-center">
        <div class="mb-2 mx-2">
          <input
            class="form-control"
            [(ngModel)]="newTopic"
            name="topic"
            [placeholder]="'e.g. ' + placeholderTopic"
            required
          />
        </div>

        <div class="mb-3 mx-2">
          <select class="form-select" [(ngModel)]="selectedParent" name="parent">
            <option value="">-- No Parent (Root Topic) --</option>
            <ng-container *ngFor="let item of indentedTopics">
              <option [value]="item.topic.id">
                {{ '—'.repeat(item.depth) }} {{ item.topic.name }}
              </option>
            </ng-container>
          </select>
        </div>
      </div>
      <button class="btn btn-primary w-100" type="submit">
        Add Topic
      </button>
    </form>
  </div>

  <ul>
    <ng-container *ngFor="let topic of rootTopics">
      <app-topic-tree [topic]="topic" [topics]="topics"></app-topic-tree>
    </ng-container>
  </ul>
</div>
